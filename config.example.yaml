# Quidnug Node Configuration
# 
# This file shows all available configuration options with their default values.
# Copy this file to config.yaml and modify as needed.
#
# Configuration precedence (highest to lowest):
# 1. Environment variables
# 2. Config file (this file)
# 3. Default values
#
# To use a custom config file location, set the CONFIG_FILE environment variable:
#   CONFIG_FILE=/path/to/config.yaml ./quidnug
#
# Default search paths for config file:
#   - ./config.yaml
#   - ./config.json
#   - /etc/quidnug/config.yaml

# HTTP server port
# Environment variable: PORT
port: "8080"

# Seed nodes to connect to on startup
# These are the initial nodes used to discover the network
# Environment variable: SEED_NODES (JSON array, e.g., '["node1:8080","node2:8080"]')
seed_nodes:
  - "seed1.quidnug.net:8080"
  - "seed2.quidnug.net:8080"

# Logging level: debug, info, warn, error
# Environment variable: LOG_LEVEL
log_level: "info"

# Interval between block generation attempts
# Uses Go duration format: "30s", "1m", "1h", etc.
# Environment variable: BLOCK_INTERVAL
block_interval: "60s"

# Maximum requests per minute per IP address
# Environment variable: RATE_LIMIT_PER_MINUTE
rate_limit_per_minute: 100

# Maximum request body size in bytes (default: 1MB)
# Environment variable: MAX_BODY_SIZE_BYTES
max_body_size_bytes: 1048576

# Directory for persistent data storage
# Environment variable: DATA_DIR
data_dir: "./data"

# Graceful shutdown timeout
# Uses Go duration format: "30s", "1m", etc.
# Environment variable: SHUTDOWN_TIMEOUT
shutdown_timeout: "30s"

# HTTP client timeout for outgoing requests to other nodes
# Uses Go duration format: "5s", "10s", etc.
# Environment variable: HTTP_CLIENT_TIMEOUT
http_client_timeout: "5s"

# Node-to-node authentication settings
# These are used for authenticated communication between nodes

# Shared secret for HMAC-SHA256 node authentication
# Should be a strong, random string shared between trusted nodes
# Environment variable: NODE_AUTH_SECRET
node_auth_secret: ""

# Whether to require authentication for node-to-node communication
# When true, requests from other nodes must include valid HMAC signatures
# Environment variable: REQUIRE_NODE_AUTH (set to "true" to enable)
require_node_auth: false

# Trust computation cache TTL
# Cached trust computations expire after this duration
# Uses Go duration format: "30s", "1m", etc.
# Environment variable: TRUST_CACHE_TTL
trust_cache_ttl: "60s"

# Supported trust domains (empty list = all domains allowed)
# Nodes will only process transactions for these domains
# Supports wildcard patterns like "*.example.com" for subdomains
# Environment variable: SUPPORTED_DOMAINS (JSON array, e.g., '["example.com","*.myapp.net"]')
supported_domains: []

# Whether dynamic domain registration is allowed
# When false, new trust domains cannot be registered via API
# Environment variable: ALLOW_DOMAIN_REGISTRATION (set to "false" to disable)
allow_domain_registration: true

# Whether subdomain registration requires parent domain validator authorization
# When true, registering "sub.example.com" requires a validator from "example.com" to trust the new validators
# Environment variable: REQUIRE_PARENT_DOMAIN_AUTH (set to "false" to disable)
require_parent_domain_auth: true

# Domain gossip protocol settings
# Interval between domain gossip broadcasts
# Uses Go duration format: "30s", "2m", etc.
# Environment variable: DOMAIN_GOSSIP_INTERVAL
domain_gossip_interval: "2m"

# TTL (hop count) for gossip messages before they stop propagating
# Environment variable: DOMAIN_GOSSIP_TTL
domain_gossip_ttl: 3
